
import { preferenceClient, ExtendedPreferenceResponse } from './config';

// Create a global process shim to prevent "process is not defined" errors with MercadoPago SDK
if (typeof window !== 'undefined' && !window.process) {
  window.process = { 
    env: {},
    version: '16.0.0', // Provide a node version
    platform: 'browser',
    versions: {
      node: '16.0.0'
    },
    release: {
      name: 'node'
    }
  } as any;
}

// Function specifically for creating PIX payments
export const createPixPayment = async (formData: any, amount: number = 139.99, description: string = 'Pelúcia Stitch') => {
  try {
    console.log('Creating PIX payment with amount:', amount, 'and description:', description);
    
    // Validate form data
    if (!formData.nome || !formData.email || !formData.cpf) {
      console.error('Missing required form data for PIX payment');
      throw new Error('Dados incompletos. Por favor, preencha todos os campos obrigatórios.');
    }
    
    // Format CPF properly
    const cpf = formData.cpf.replace(/\D/g, '');
    if (cpf.length !== 11) {
      console.error('Invalid CPF length:', cpf.length);
      throw new Error('CPF inválido. Por favor, verifique o número do CPF.');
    }
    
    // For demonstration purposes, we'll simulate a PIX payment response
    // This avoids CORS issues with direct API calls to MercadoPago
    console.log('Simulating PIX payment response for demonstration');
    
    // Generate a fake QR code (in production this would come from the MercadoPago API)
    const simulatedResponse = {
      id: 'sim_pix_' + Math.random().toString(36).substring(2, 15),
      qr_code_base64: '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',
      qr_code: '00020101021226810014br.gov.bcb.pix2579api.mercadopago.com/simulation/qr/5f5f9dafe935f3fd6580ab7d4201000695802BR5925Pelúcia Stitch 6009SAO PAULO62070503***63048C08'
    };
    
    return {
      id: simulatedResponse.id,
      qr_code_base64: simulatedResponse.qr_code_base64,
      qr_code: simulatedResponse.qr_code
    };
  } catch (error: any) {
    console.error('Error creating MercadoPago PIX payment:', error);
    throw new Error(error.message || 'Falha ao gerar o pagamento PIX. Por favor, tente novamente.');
  }
};
